var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(b,k,c){b instanceof String&&(b=String(b));for(var f=b.length,p=0;p<f;p++){var a=b[p];if(k.call(c,a,p,b))return{i:p,v:a}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,k,c){b!=Array.prototype&&b!=Object.prototype&&(b[k]=c.value)};$jscomp.getGlobal=function(b){b=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,b];for(var k=0;k<b.length;++k){var c=b[k];if(c&&c.Math==Math)return c}return globalThis};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(b,k,c,f){if(k){c=$jscomp.global;b=b.split(".");for(f=0;f<b.length-1;f++){var p=b[f];p in c||(c[p]={});c=c[p]}b=b[b.length-1];f=c[b];k=k(f);k!=f&&null!=k&&$jscomp.defineProperty(c,b,{configurable:!0,writable:!0,value:k})}};$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(b,c){return $jscomp.findInternal(this,b,c).v}},"es6","es3");
define(["cbj","configbox/server"],function(b,k){var c={initAdminPageEach:function(a){a.find(".kenedo-listing-form:not(.default-handlers-attached)").each(function(){var a=b(this);a.find(".trigger-kenedo-form-task").each(function(){b(this).on("click",c.onListTaskButtonClicked)});a.on("cbListTaskTriggered",c.onListTaskTriggered);a.on("cbListTaskResponseReceived",c.onListTaskResponseReceived);a.addClass("default-handlers-attached");a.trigger("cbDefaultHandlersAttached")});a.find(".kenedo-details-form:not(.default-handlers-attached)").each(function(){var a=
b(this);a.find(".trigger-kenedo-form-task").each(function(){b(this).on("click",c.onFormTaskButtonClicked)});a.on("cbFormTaskTriggered",c.onFormTaskTriggered);a.on("cbFormTaskResponseReceived",c.onFormTaskResponseReceived);a.addClass("default-handlers-attached");a.trigger("cbDefaultHandlersAttached")})},initAdminPageOnce:function(){b(document).on("click",".kenedo-listing-form .trigger-order-list",c.onChangeListOrder);b(document).on("click",".kenedo-listing-form .trigger-change-page",c.onChangeListPage);
b(document).on("change",".kenedo-listing-form .kenedo-limit-select",c.onChangeListLimit);b(document).on("change",".kenedo-listing-form .listing-filter",c.onChangeListFilters);b(document).on("click",".kenedo-listing-form .trigger-toggle-record-activation",c.onToggleRecordActivation);b(document).on("click",".kenedo-listing-form .trigger-store-record-ordering",c.onStoreOrdering);b(document).on("click",".kenedo-listing-form .kenedo-check-all-items",c.toggleCheckboxes);b(document).on("click",".kenedo-listing-form .listing-link",
c.openListingLink);window.addEventListener("popstate",function(a){"undefined"!=typeof a.state&&null!==a.state&&!0===a.state.isSubview&&(c.loadSubview(a.state.url,a.state.targetSelector,a.state.callbackFunction,!1),a.preventDefault())});b(document).on("click",".ajax-target-link",function(a){a.preventDefault();if(!0!==a.shiftKey||!0!==a.metaKey)a=b(this).attr("href"),c.loadSubview(a)});b(document).on("click",".task-toggle-help",function(){var a=b(this);a.toggleClass("active");a.closest(".kenedo-details-form").toggleClass("show-help")});
b(document).on("click",".trigger-open-modal",c.onOpenColorBoxModal);b(document).on("click",".kenedo-new-tab",function(a){window.open(this.href);a.preventDefault()});b(document).on("click",".property-type-translatable .language-switcher",function(){b(this).siblings().removeClass("active");b(this).addClass("active");var a=b(this).attr("for");b("#translation-"+a).show().siblings().hide()});b(document).on("change",".kenedo-property :input",function(){var a=b(this).closest(".kenedo-details-form"),e=b(this).closest(".kenedo-property").attr("id").replace("property-name-",
""),g=b(this).val(),d=a.data("record");"undefined"!=typeof d[e]&&(d[e]=g);b(this).closest(".kenedo-details-form").trigger("kenedoFormDataChanged",[d,a])});b(document).on("click",".property-group-using-toggles>.property-group-legend",function(){b(this).closest(".property-group").hasClass("property-group-opened")?(b(this).closest(".property-group").removeClass("property-group-opened").addClass("property-group-closed"),b(this).closest(".property-group").find(".property-group-toggle-state").val("closed")):
(b(this).closest(".property-group").removeClass("property-group-closed").addClass("property-group-opened"),b(this).closest(".property-group").find(".property-group-toggle-state").val("opened"))});b(document).on("click",".show-file-uploader",function(a){a.preventDefault();a=b(this).closest(".property-body").find(".file-upload-field").clone();b(this).data("inputfield",a);b(this).closest(".property-body").find(".file-uploader").slideDown(300);b(this).closest(".property-body").find(".file-current-file, .file-delete, .file-upload").slideUp(300)});
b(document).on("click",".file-upload-cancel",function(a){a.preventDefault();b(this).closest(".property-body").find(".file-uploader").slideUp(300);b(this).closest(".property-body").find(".file-current-file, .file-delete, .file-upload").slideDown(300);a=b(this).closest(".property-body").find(".show-file-uploader").data("inputfield");b(this).closest(".property-body").find(".file-upload-field").replaceWith(a)});b(document).on("keyup",".ordering-text-field",function(){b(this).closest(".kenedo-listing").find(".trigger-store-record-ordering").show()});
b(document).on("mouseenter",".kenedo-popup-trigger",f.cancelClosing);b(document).on("mouseenter",".kenedo-popup-trigger",f.scheduleOpening);b(document).on("mouseleave",".kenedo-popup-trigger",f.scheduleClosing);b(document).on("mouseleave",".kenedo-popup-trigger",f.cancelOpening);b(document).on("mouseleave",".kenedo-popup",f.scheduleClosing);b(document).on("mouseenter",".kenedo-popup",f.cancelClosing);b(".kenedo-popup-trigger").click(function(a){a.stopPropagation();a.preventDefault();b(this).trigger("mouseenter")});
b(document).on("click",".trigger-select-all-multi",function(){b(this).closest(".kenedo-property").find(".property-body option").prop("selected",!0);b(this).closest(".kenedo-property").find(".property-body input").prop("checked",!0)});b(document).on("click",".trigger-deselect-all-multi",function(){b(this).closest(".kenedo-property").find(".property-body option").prop("selected",!1);b(this).closest(".kenedo-property").find(".property-body input").prop("checked",!1)})},onChangeListOrder:function(){var a=
b(this),e=a.closest(".kenedo-listing-form"),g=a.data("property-name");a=a.data("current-direction");a=""===a||"desc"===a?"asc":"desc";c.setListParameter(e,"listing_order_property_name",g);c.setListParameter(e,"listing_order_dir",a);c.refreshList(e)},onChangeListPage:function(){var a=b(this),e=a.closest(".kenedo-listing-form");a=parseInt(a.data("start"));c.setListParameter(e,"limitstart",a);c.refreshList(e)},onChangeListLimit:function(){var a=b(this),e=a.closest(".kenedo-listing-form");c.setListParameter(e,
"limit",a.val());c.refreshList(e)},onChangeListFilters:function(){var a=b(this).closest(".kenedo-listing-form");c.refreshList(a)},setListParameter:function(a,b,g){a.find(".listing-data[data-key="+b+"]").data("value",g)},getListParameter:function(a,b,g){a=a.find(".listing-data[data-key="+b+"]").data("value");return"undefined"===typeof a?g:a},getListParameters:function(a){var e={};a.find(".listing-data").each(function(){var a=b(this).data("key");e[a]=b(this).data("value")});return e},getListFilters:function(a){var e=
{};a.find(".listing-filter").each(function(){var a=b(this).attr("name");e[a]=b(this).val()});return e},getCheckedListItemIds:function(a){var e=[];a.find(".kenedo-item-checkbox").each(function(){!0===b(this).prop("checked")&&e.push(b(this).val())});return e},refreshList:function(a,e){var g=c.getListParameters(a),d=c.getListFilters(a),r=a.closest(".kenedo-view.cb-content"),h={};b.each(g,function(a,b){h[a]=b});b.each(d,function(a,b){h[a]=b});cbrequire(["configbox/server"],function(a){a.replaceHtml(r,
g.controller,g.task,h).done(e)})},refreshForm:function(a,b){var e=c.getFormParameter(a,"controller"),d={id:c.getFormParameter(a,"id"),"return":c.getFormParameter(a,"return")};k.replaceHtml(a.closest(".kenedo-view"),e,"edit",d).done(b)},getFormParameter:function(a,b,g){a=a.find(":input[name="+b+"]").val();return"undefined"===typeof a&&"undefined"!==typeof g?g:a},setFormParameter:function(a,b,g){a.find(":input[name="+b+"]").val(g)},onFormTaskButtonClicked:function(a){var e=b(this),g=e.data("task"),
d=e.closest(".kenedo-details-form"),r=d.data("view");a={btn:e,task:g,form:d,viewName:r,event:a};e.hasClass("disabled")||(e.addClass("disabled"),c.setFormParameter(d,"task",g),d.trigger("cbFormTaskTriggered",a))},onFormTaskTriggered:function(a,b){switch(b.task){case "cancel":if(0<b.form.closest(".modal").length)cbrequire(["cbj.bootstrap"],function(){b.form.closest(".modal").modal("hide").find(".modal-content").html("")});else if(a=b.form.find("input[name=return]").val())window.location.href=c.base64UrlDecode(a);
break;case "store":case "apply":case "storeAndNew":cbrequire(["tinyMCE"],function(a){a.triggerSave();a=new XMLHttpRequest;a.onload=function(){b.form.trigger("cbFormTaskResponseReceived",[this,b])};a.open("post",b.form[0].action,!0);a.send(new FormData(b.form[0]))})}},onFormTaskResponseReceived:function(a,e,g){try{var d=JSON.parse(e.responseText)}catch(h){console.warn('Could not parse JSON response. Response text was: "'+e.responseText+'"');console.warn("Error message follows:");console.warn(h);return}g.btn.removeClass("disabled");
switch(g.task){case "store":if(!1===d.success){c.showResponseMessages(g.form,d.errors||[],d.messages||[]);return}0<g.form.closest(".modal").length?((a=g.form.closest(".modal").data("parent-intra-listing"))&&c.refreshList(a),g.form.closest(".modal").modal("hide").find(".modal-content").html("")):(a=c.base64UrlDecode(c.getFormParameter(g.form,"return")),c.loadSubview(a,null,function(){var a=b(".kenedo-listing-form:first");c.showResponseMessages(a,d.errors||[],d.messages||[])}));break;case "storeAndNew":c.showResponseMessages(g.form,
d.errors||[],d.messages||[]);!0===d.success&&d.data&&d.data.id&&c.setFormParameter(g.form,"id","");(a=g.form.closest(".modal").data("parent-intra-listing"))&&c.refreshList(a);break;case "apply":if(!1===d.success){c.showResponseMessages(g.form,d.errors||[],d.messages||[]);return}!0===d.success&&d.data&&d.data.id&&c.setFormParameter(g.form,"id",d.data.id);var r=g.form.closest(".kenedo-view").parent();c.refreshForm(g.form,function(){g.form=r.find(".kenedo-details-form:first");c.showResponseMessages(g.form,
d.errors||[],d.messages||[])});(a=g.form.closest(".modal").data("parent-intra-listing"))&&c.refreshList(a)}b(document).trigger("cbFormTaskResponseReceivedGlobal",[e,g])},showResponseMessages:function(a,e,g){var d=a.find(".kenedo-messages:first");d.find(".kenedo-messages-error").html("<ul></ul>");d.find(".kenedo-messages-notice").html("<ul></ul>");0!==e.length&&(b.each(e,function(a,b){d.find(".kenedo-messages-error ul").append("<li>"+b+"</li>")}),d.find(".kenedo-messages-error").show(),d.find(".kenedo-messages-error").addClass("flash"),
window.setTimeout(function(){d.find(".kenedo-messages-error").removeClass("flash")},1E3));0!==g.length&&(b.each(g,function(a,b){d.find(".kenedo-messages-notice ul").append("<li>"+b+"</li>")}),d.find(".kenedo-messages-notice").show(),d.find(".kenedo-messages-notice").addClass("flash"),window.setTimeout(function(){d.find(".kenedo-messages-notice").removeClass("flash")},1E3));(0<g.length||0<e.length)&&d.show()},loadSubview:function(a,e,g,d){var c=e?e:".configbox-ajax-target";if("object"==typeof a)var h=
a.value;"string"==typeof a&&""!==a&&(h=a);if(!h)throw"loadSubview called, but no URL could be determined.";void 0!==d&&!1!==d||window.history.pushState({isSubview:!0,url:h,targetSelector:c},"",h);-1===h.indexOf("output_mode")&&("magento"===k.config.platformName||"magento2"===k.config.platformName?h+="output_mode/view_only":(h+=-1===h.indexOf("?")?"?":"&",h+="output_mode=view_only"));cbrequire(["tinyMCE"],function(a){3<a.majorVersion&&a.remove()});b(c).animate({opacity:".0"},200,function(){b(c).load(h+
" .kenedo-view:first",function(a,e,d){200!==d.status&&(a='<div id="view-error" class="kenedo-view"><div class="kenedo-listing-form"><p>Encountered a system error: HTTP code is '+(d.status+". Text message is: "+d.statusText+"</p>"),a+="</div></div>",b(c).html(a));b(c).animate({opacity:"1"},200,function(){b(document).trigger("cbViewInjected");"function"==typeof g&&g(b(c))})})})},onOpenColorBoxModal:function(a){var e=b(this);a.preventDefault();var g=e.data("modal-width"),d=e.data("modal-height"),c=e.attr("href");
g||(g=900);d||(d=600);cbrequire(["cbj.colorbox"],function(){b.colorbox({transition:"fade",href:c,overlayClose:!0,iframe:!0,fastIframe:!1,className:"cb-modal",width:g,height:d})})},addedStylesheets:[],addStylesheet:function(a){-1===this.addedStylesheets.indexOf(a.toLowerCase())&&(this.addedStylesheets.push(a.toLowerCase()),a='<link rel="stylesheet" type="text/css" href="'+a+'">',b("head").append(a))},subviewReadyFunctions:{},base64UrlEncode:function(a){return p.encode(a).replace(/\+/g,"-").replace(/\//g,
"_").replace(/=/g,",")},base64UrlDecode:function(a){a=a.replace(/-/g,"+").replace(/_/g,"/").replace(/,/g,"=");return p.decode(a)},openDetailsFormModal:function(a,e,g,d,c,h,f){var r=b(".view-admin .configbox-modals");if(0<r.find(".intra-listing-modal").length)var l=r.find(".intra-listing-modal");else l=b('<div class="modal intra-listing-modal" tabindex="-1" role="dialog"><div class="modal-dialog" role="document"><div class="modal-content"></div></div></div>'),l.appendTo(r);l.data("parent-form",e);
l.data("parent-intra-listing",a);cbrequire(["cbj","cbj.bootstrap"],function(a){a={id:c};h&&(a["prefill_"+h]=f);k.injectHtml(l.find(".modal-content"),g,d,a,function(){l.modal({keyboard:!1,backdrop:"static"})})})},openListingLink:function(a){a.preventDefault();var e=b(this);if(0<e.closest(".intra-listing").length){a=e.closest(".kenedo-listing-form");var g=e.closest(".kenedo-details-form"),d=e.data("controller"),r=e.data("task");e=e.data("id");var h=c.getListParameter(a,"foreignKeyField"),f=c.getListParameter(a,
"foreignKeyPresetValue");c.openDetailsFormModal(a,g,d,r,e,h,f)}else a=b(this).attr("href"),c.loadSubview(a)},setPropertyVisibility:function(a,e,g){var d={},c,h;e||(e={});g.find(".property-group").each(function(){h=b(this).attr("id");h=h.replace("property-name-","");e[h]=""});for(var f in e)if(e.hasOwnProperty(f)&&(a=g.find(".property-name-"+f),d=a.data("propertyDefinition"))){var k=!0;if(!a.hasClass("invisible-field")){if(d.appliesWhen)for(c in d.appliesWhen)if(d.appliesWhen.hasOwnProperty(c)){var l=
e[c];var m=d.appliesWhen[c];"object"!=typeof m&&(m=[m]);var q=!1;for(var n in m)if(m.hasOwnProperty(n)){var p="is";"string"==typeof m[n]&&"!"===m[n].substr(0,1)&&(m[n]=m[n].substr(1),p="is not");if("is"===p){if("*"===m[n]&&l&&"0"!=l){q=!0;break}if(m[n]==l){q=!0;break}}else{if("*"===m[n]&&(!l||"0"==l)){q=!0;break}if(m[n]!=l){q=!0;break}}}!1===q&&(k=!1)}k?"none"===a.css("display")&&(a.show(),d="undefined"===typeof d["default"]?"":d["default"])&&(l=a.find(":input[name="+f+"]"),l.is("select")?l.val(d).change().trigger("chosen:updated"):
l.is("[type=radio]")?a.find("input[value="+d+"]").prop("checked",!0):l.val(d),l.change(),e[f]=d):"none"!==a.css("display")&&(a.hide(),l=a.find(":input[name="+f+"]"),l.is("select")?(d="undefined"===typeof d["default"]?"0":d["default"],l.val(d).trigger("chosen:updated")):(l.is("[type=radio]")?(d="undefined"===typeof d["default"]?"0":d["default"],a.find("input[value="+d+"]").prop("checked",!0)):(d="undefined"===typeof d["default"]?"":d["default"],l.val(d)),a.hasClass("property-type-translatable")&&a.find(".form-control").val(d).change()),
e[f]=d)}}},onToggleRecordActivation:function(){var a=b(this),e=a.closest(".kenedo-listing-form"),g=a.data("id"),d=a.data("active")?"unpublish":"publish";a.find(".fa").addClass("fa-spinner fa-spin");c.setListParameter(e,"task",d);c.setListParameter(e,"ids",g);c.refreshList(e)},onListTaskButtonClicked:function(a){var e=b(this),g=e.data("task"),d=e.closest(".kenedo-listing-form"),c=d.data("view");a={btn:e,task:g,list:d,viewName:c,event:a};e.hasClass("disabled")||(e.addClass("disabled"),d.trigger("cbListTaskTriggered",
a))},onListTaskTriggered:function(a,b){switch(b.task){case "add":if(!1===0<b.list.closest(".intra-listing").length)a=c.getListParameter(b.list,"add-link"),a=c.base64UrlDecode(a),c.loadSubview(a);else{a=b.list.closest(".kenedo-details-form");var e=c.getListParameter(b.list,"controller"),d=c.getListParameter(b.list,"foreignKeyField"),f=c.getListParameter(b.list,"foreignKeyPresetValue");c.openDetailsFormModal(b.list,a,e,"edit",0,d,f)}break;case "copy":case "remove":case "delete":a=c.getListParameter(b.list,
"controller");e={ids:c.getCheckedListItemIds(b.list).join(",")};k.makeRequest(a,b.task,e).then(function(a,e,d){b.list.trigger("cbListTaskResponseReceived",[d,b])});break;default:console.log('Unknown task "'+b.task+'"')}},onListTaskResponseReceived:function(a,e,g){g.btn.removeClass("disabled");try{var d=JSON.parse(e.responseText)}catch(r){console.warn('Could not parse JSON response. Response text was: "'+e.responseText+'"');console.warn("Error message follows:");console.warn(r);return}switch(g.task){case "copy":case "remove":c.refreshList(g.list,
function(){g.list=b(".kenedo-listing-form:first");c.showResponseMessages(g.list,d.errors||[],d.messages||[])})}b(document).trigger("cbListTaskResponseReceivedGlobal",[e,g])},registerSubviewReadyFunction:function(a,b){"undefined"==typeof c.subviewReadyFunctions[a]&&(c.subviewReadyFunctions[a]=[]);c.subviewReadyFunctions[a].push(b)},runSubviewReadyFunctions:function(a){"undefined"!=typeof c.subviewReadyFunctions[a]&&b.each(c.subviewReadyFunctions[a],function(a,b){"function"==typeof b&&b()})},toggleCheckboxes:function(){var a=
b(".kenedo-listing .kenedo-check-all-items").prop("checked");b(this).closest(".kenedo-listing").find(".kenedo-item-checkbox").prop("checked",a)},onStoreOrdering:function(){if(!b(this).hasClass("clicked")){b(this).addClass("clicked");var a=b(this).closest(".kenedo-listing-form");b(this).find(".fa").removeClass("fa-floppy-o").addClass("fa-spinner").addClass("fa-spin");var e={};a.find(".item-row").each(function(){var a=b(this).data("item-id");e[a]=parseInt(b(this).find(".ordering-text-field").val())});
var g=c.getListParameter(a,"controller"),d={updates:JSON.stringify(e)};k.makeRequest(g,"storeOrdering",d).done(function(){c.refreshList(a)})}}},f={openingDelay:200,closingDelay:200,openers:[],closers:[],clearOpeners:function(){b.each(f.openers,function(a,b){"undefined"!=typeof b&&window.clearTimeout(b.timeout)});f.openers=[]},clearClosers:function(){b.each(f.closers,function(a,b){"undefined"!=typeof b&&window.clearTimeout(b.timeout)});f.closers=[]},scheduleOpening:function(){var a=b(this).attr("id").replace("kenedo-popup-trigger-",
"");f.openers[a]&&window.clearTimeout(f.openers[a].timeout);f.openers[a]={popupId:a,timeout:window.setTimeout(function(){f.open(a)},f.openingDelay)}},scheduleClosing:function(){var a;b(this).is(".kenedo-popup")&&(a=b(this).attr("id").replace("kenedo-popup-",""));b(this).is(".kenedo-popup-trigger")&&(a=b(this).attr("id").replace("kenedo-popup-trigger-",""));f.closers[a]&&window.clearTimeout(f.closers[a].timeout);f.closers[a]={popupId:a,timeout:window.setTimeout(function(){f.close(a)},f.closingDelay)}},
cancelOpening:function(){var a;b(this).is(".kenedo-popup")&&(a=b(this).attr("id").replace("kenedo-popup-",""));b(this).is(".kenedo-popup-trigger")&&(a=b(this).attr("id").replace("kenedo-popup-trigger-",""));f.openers[a]&&window.clearTimeout(f.openers[a].timeout)},cancelClosing:function(){var a;b(this).is(".kenedo-popup")&&(a=b(this).attr("id").replace("kenedo-popup-",""));b(this).is(".kenedo-popup-trigger")&&(a=b(this).attr("id").replace("kenedo-popup-trigger-",""));f.closers[a]&&window.clearTimeout(f.closers[a].timeout)},
open:function(a){var e=b("#kenedo-popup-original-"+a).clone(!0);b("#kenedo-popup-"+a).remove();e.hide();e.attr("id","kenedo-popup-"+a);e.appendTo("body");f.position(a);e.fadeIn();b("#kenedo-popup-trigger-"+a).trigger("popup-open")},close:function(a){b("#kenedo-popup-"+a).fadeOut(200,function(){b(this).remove()});b("#kenedo-popup-trigger-"+a).trigger("popup-close")},position:function(a){var e=b("#kenedo-popup-trigger-"+a);a=b("#kenedo-popup-"+a);a.css("visibility","hidden");a.css("display","block");
b("body").append(a);var c=e.find(".kenedo-popup-trigger-content");e=c.outerWidth();var d=c.outerHeight(),f=c.offset(),h=a.find(".kenedo-popup-content").outerWidth(),k=a.find(".kenedo-popup-content").outerHeight(),p=Math.sqrt(1352)/2;a.outerWidth(h);a.outerHeight(k+p);var l=Math.max(document.documentElement.clientWidth,window.innerWidth||0);c=Math.max(document.documentElement.clientHeight,window.innerHeight||0);var m=b("body").scrollTop(),q=b("body").scrollLeft(),n=f.left+e/2-h/2;e=f.top-k-p;d=f.top+
d+p;k=d+k;0>n+q?(q=10+q,n-=q,f=document.createElement("style"),document.head.appendChild(f),f.sheet.insertRule(".kenedo-popup-content:before {left:"+n+"px;}",f.sheet.cssRules.length),f.sheet.insertRule(".kenedo-popup-content:after {left:"+n+"px;}",f.sheet.cssRules.length),n=q):(q=document.createElement("style"),document.head.appendChild(q),q.sheet.insertRule(".kenedo-popup-content:before {left:auto;}",q.sheet.cssRules.length),q.sheet.insertRule(".kenedo-popup-content:after {left:auto;}",q.sheet.cssRules.length));
h+n>l&&(q=l-h-10,n-=q,h=document.createElement("style"),document.head.appendChild(h),h.sheet.insertRule(".kenedo-popup-content:before {left:"+n+"px;}",h.sheet.cssRules.length),h.sheet.insertRule(".kenedo-popup-content:after {left:"+n+"px;}",h.sheet.cssRules.length),n=q);h=e>m;c=k<c+m;m=null;a.hasClass("position-prefer-top")&&h&&(m=!0);a.hasClass("position-prefer-bottom")&&c&&(m=!1);null===m&&(m=h);m?(a.addClass("position-top").removeClass("position-bottom"),a.offset({left:n,top:e})):(a.addClass("position-bottom").removeClass("position-top"),
a.offset({left:n,top:d}));a.css("display","none");a.css("visibility","visible");return a}},p={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a){var b="",c=0;for(a=p._utf8_encode(a);c<a.length;){var d=a.charCodeAt(c++);var f=a.charCodeAt(c++);var h=a.charCodeAt(c++);var k=d>>2;d=(d&3)<<4|f>>4;var t=(f&15)<<2|h>>6;var l=h&63;isNaN(f)?t=l=64:isNaN(h)&&(l=64);b=b+this._keyStr.charAt(k)+this._keyStr.charAt(d)+this._keyStr.charAt(t)+this._keyStr.charAt(l)}return b},
decode:function(a){var b="",c=0;for(a=a.replace(/[^A-Za-z0-9\+\/=]/g,"");c<a.length;){var d=this._keyStr.indexOf(a.charAt(c++));var f=this._keyStr.indexOf(a.charAt(c++));var h=this._keyStr.indexOf(a.charAt(c++));var k=this._keyStr.indexOf(a.charAt(c++));d=d<<2|f>>4;f=(f&15)<<4|h>>2;var t=(h&3)<<6|k;b+=String.fromCharCode(d);64!=h&&(b+=String.fromCharCode(f));64!=k&&(b+=String.fromCharCode(t))}return b=p._utf8_decode(b)},_utf8_encode:function(a){a=a.replace(/\r\n/g,"\n");for(var b="",c=0;c<a.length;c++){var d=
a.charCodeAt(c);128>d?b+=String.fromCharCode(d):(127<d&&2048>d?b+=String.fromCharCode(d>>6|192):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128)),b+=String.fromCharCode(d&63|128))}return b},_utf8_decode:function(a){for(var b="",c=0,d,f,h;c<a.length;)d=a.charCodeAt(c),128>d?(b+=String.fromCharCode(d),c++):191<d&&224>d?(f=a.charCodeAt(c+1),b+=String.fromCharCode((d&31)<<6|f&63),c+=2):(f=a.charCodeAt(c+1),h=a.charCodeAt(c+2),b+=String.fromCharCode((d&15)<<12|(f&63)<<6|h&63),c+=
3);return b}};return c});
