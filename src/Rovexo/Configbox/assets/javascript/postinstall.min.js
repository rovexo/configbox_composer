var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,e,c){a instanceof String&&(a=String(a));for(var b=a.length,f=0;f<b;f++){var g=a[f];if(e.call(c,g,f,a))return{i:f,v:g}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,e,c){a!=Array.prototype&&a!=Object.prototype&&(a[e]=c.value)};$jscomp.getGlobal=function(a){a=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,a];for(var e=0;e<a.length;++e){var c=a[e];if(c&&c.Math==Math)return c}return globalThis};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,e,c,b){if(e){c=$jscomp.global;a=a.split(".");for(b=0;b<a.length-1;b++){var f=a[b];f in c||(c[f]={});c=c[f]}a=a[a.length-1];b=c[a];e=e(b);e!=b&&null!=e&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:e})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6","es3");
define(["cbj","configbox/server","cbj.chosen"],function(a,e){var c={goToStep:function(b){var c=window.location.href,e=-1===c.indexOf("?")?"?":"&";c=-1===c.indexOf("step=")?window.location.href+e+"step="+b:c.replace(/step=([^&]*)/,"step="+b);window.history.pushState({step:b},window.document.title,c);a(".cube").attr("id","step-"+b)},initPostInstall:function(){window.history.replaceState({step:a(".cube").attr("id").replace("step-","")},window.document.title,window.location.href);a(".chosen-select").chosen({width:"100%"});
window.addEventListener("popstate",function(b){"undefined"!==typeof b.state&&b.state.step&&a(".cube").attr("id","step-"+b.state.step)});a(document).on("click",".trigger-store-license-key",function(){var b=a(this).closest(".cube-step"),f=b.data("step"),g={licenseKey:b.find("#licenseKey").val()},d=!0;a.each(g,function(a,c){""===c.trim()&&(d=!1,b.find("#"+a).closest(".form-group").addClass("has-error"))});!1!==d&&(b.find(".has-error").removeClass("has-error"),c.goToStep(a(this).data("next-step")),e.makeRequest("adminpostinstall",
"storeLicenseKey",g).fail(function(){window.alert("An error has occurred. Please contact Rovexo to sort this out.")}).done(function(d){b.find(".has-error").removeClass("has-error");b.find(".validation-placeholder").each(function(){a(this).text("")});!1===d.success&&(c.goToStep(f),0!==d.validationIssues.length&&a.each(d.validationIssues,function(a,c){b.find("#"+a).closest(".form-group").addClass("has-error");b.find("#"+a).closest(".form-group").find(".validation-placeholder").text(c)}),0!==d.errors.length&&
window.alert(d.errors.join("\n")))}))});a(document).on("click",".trigger-store-shop-data",function(){var b=a(this).closest(".cube-step"),f=b.data("step"),g={shopName:b.find("#shopName").val(),shopWebsite:b.find("#shopWebsite").val(),email:b.find("#email").val()},d=!0;a.each(g,function(a,c){""===c.trim()&&(d=!1,b.find("#"+a).closest(".form-group").addClass("has-error"))});!1!==d&&(b.find(".has-error").removeClass("has-error"),c.goToStep(a(this).data("next-step")),e.makeRequest("adminpostinstall","storeShopData",
g).fail(function(){window.alert("An error has occurred. Please contact Rovexo to sort this out.")}).done(function(d){b.find(".has-error").removeClass("has-error");b.find(".validation-placeholder").each(function(){a(this).text("")});!1===d.success&&(c.goToStep(f),0!==d.validationIssues.length&&a.each(d.validationIssues,function(a,c){b.find("#"+a).closest(".form-group").addClass("has-error");b.find("#"+a).closest(".form-group").find(".validation-placeholder").text(c)}),0!==d.errors.length&&window.alert(d.errors.join("\n")))}))});
a(document).on("click",".trigger-store-vat-data",function(){var b=a(this).closest(".cube-step"),f=b.data("step"),g={taxRate:b.find("#taxRate").val(),countryId:b.find("#countryId").val(),taxMode:b.find("#taxMode").val()};b.find(".has-error").removeClass("has-error");c.goToStep(a(this).data("next-step"));e.makeRequest("adminpostinstall","storeTaxData",g).fail(function(){window.alert("An error has occurred. Please contact Rovexo to sort this out.")}).done(function(d){b.find(".has-error").removeClass("has-error");
b.find(".validation-placeholder").each(function(){a(this).text("")});!1===d.success&&(c.goToStep(f),0!==d.validationIssues.length&&a.each(d.validationIssues,function(a,c){b.find("#"+a).closest(".form-group").addClass("has-error");b.find("#"+a).closest(".form-group").find(".validation-placeholder").text(c)}),0!==d.errors.length&&window.alert(d.errors.join("\n")))})});a(document).on("click",".trigger-store-languages",function(){var b=a(this).closest(".cube-step"),f=b.data("step"),g={languageTags:b.find("#languageTags").val()};
b.find(".has-error").removeClass("has-error");c.goToStep(a(this).data("next-step"));e.makeRequest("adminpostinstall","storeLanguageTags",g).fail(function(){window.alert("An error has occurred. Please contact Rovexo to sort this out.")}).done(function(d){b.find(".has-error").removeClass("has-error");b.find(".validation-placeholder").each(function(){a(this).text("")});!1===d.success&&(c.goToStep(f),0!==d.validationIssues.length&&a.each(d.validationIssues,function(a,c){b.find("#"+a).closest(".form-group").addClass("has-error");
b.find("#"+a).closest(".form-group").find(".validation-placeholder").text(c)}),0!==d.errors.length&&window.alert(d.errors.join("\n")))})});a(document).on("click",".trigger-store-currencies",function(){var b=a(this).closest(".cube-step"),f=b.data("step"),g={baseCurrencyTitle:b.find("#baseCurrencyTitle").val(),baseCurrencySymbol:b.find("#baseCurrencySymbol").val(),baseCurrencyCode:b.find("#baseCurrencyCode").val(),currencies:[]};b.find(".currencies .row").each(function(){var b={id:a(this).data("currency-id"),
title:a(this).find(".currency-title").val(),symbol:a(this).find(".currency-symbol").val(),code:a(this).find(".currency-code").val(),multiplier:a(this).find(".currency-multiplier").val()};g.currencies.push(b)});b.find(".has-error").removeClass("has-error");c.goToStep(a(this).data("next-step"));e.makeRequest("adminpostinstall","storeCurrencies",g).fail(function(){window.alert("An error has occurred. Please contact Rovexo to sort this out.")}).done(function(d){b.find(".has-error").removeClass("has-error");
b.find(".validation-placeholder").each(function(){a(this).text("")});!1===d.success&&(c.goToStep(f),0!==d.validationIssues.length&&a.each(d.validationIssues,function(a,c){b.find(".validation-placeholder").append("<div>"+c+"</div>")}),0!==d.errors.length&&a.each(d.errors,function(a,c){b.find(".validation-placeholder").append("<div>"+c+"</div>")}))})});a(document).on("click",".trigger-finish-postinstall",function(){var b=a(this).closest(".view-adminpostinstall").data("url-dashboard");a(".cube").addClass("fallen");
window.setTimeout(function(){a(".view-adminpostinstall").remove();window.location.href=b},1E3)});a(document).on("click",".trigger-add-currency",function(){var b=a(".blueprint-currency").html();a(".currencies").append(b);a(".currencies .row").last().find(".currency-name").focus()});a(document).on("click",".trigger-remove-currency",function(){a(this).closest(".row").remove()})}};return c});
