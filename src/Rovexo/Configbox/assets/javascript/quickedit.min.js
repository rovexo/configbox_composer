cbj(document).ready(function(){window.com_configbox&&window.com_configbox.canQuickEdit&&setQuickEdit();cbj(".show-edit-buttons").click(function(){cbj(this).closest(".quick-edit-buttons-fader").fadeOut(200,function(){cbj(this).closest(".quick-edit-buttons").find(".quick-edit-buttons-content").fadeIn(200)})});cbj(".hide-edit-buttons").click(function(){cbj(this).closest(".quick-edit-buttons").find(".quick-edit-buttons-content").fadeOut(200,function(){cbj(this).closest(".quick-edit-buttons").find(".quick-edit-buttons-fader").fadeIn(200)})})});
function setQuickEdit(){0!=window.com_configbox.canQuickEdit&&"undefined"!=typeof window.com_configbox.view&&("configuratorpage"==window.com_configbox.view?("undefined"!=typeof window.com_configbox.elements&&null!=window.com_configbox.elements&&cbj.each(window.com_configbox.elements,function(){quickEdit("elementtitle",{id:this.id});quickEdit("elementdesc",{id:this.id});"object"==typeof this.options&&null!=this.options&&cbj.each(this.options,function(){quickEdit("xrefprice",{id:this.option_id});quickEdit("xreftitle",
{id:this.option_id});quickEdit("xrefdesc",{id:this.option_id})})}),quickEdit("pagetitle",{id:window.com_configbox.page_id}),quickEdit("pagedescription",{id:window.com_configbox.page_id})):"productlisting"==window.com_configbox.view?cbj.each(window.com_configbox.products,function(){quickEdit("producttitle",this);quickEdit("productdesc",this)}):"product"==window.com_configbox.view&&(quickEdit("prodpageproducttitle",{id:window.com_configbox.prod_id}),quickEdit("prodpageproductdesc",{id:window.com_configbox.prod_id}),
quickEdit("prodpageproductlongdesc",{id:window.com_configbox.prod_id})))}
function quickEdit(e,b){if(0!=window.com_configbox.canQuickEdit&&"undefined"!=typeof window.com_configbox.view){if(!e)return!1;var a={};switch(e){case "prodpageproductdesc":a.selector=".listing-product-description";a.fieldname="description-"+window.com_configbox.langTag;a.entity="adminproducts";a.inputtype="textarea";a.htmlarea=1;break;case "prodpageproductlongdesc":a.selector=".product-description";a.fieldname="longdescription-"+window.com_configbox.langTag;a.entity="adminproducts";a.inputtype="textarea";
a.htmlarea=1;break;case "prodpageproducttitle":a.selector=".listing-product-title, .componentheading";a.fieldname="title-"+window.com_configbox.langTag;a.entity="adminproducts";a.alsoputin=".componentheading, .product_title";break;case "productdesc":a.selector=".product-id-"+b.id+" .listing-product-description";a.fieldname="description-"+window.com_configbox.langTag;a.entity="adminproducts";a.inputtype="textarea";a.htmlarea=1;break;case "pagetitle":a.selector="#com_configbox .configurator-page-title span";
a.fieldname="title-"+window.com_configbox.langTag;a.entity="adminpages";break;case "pagedescription":a.selector=".configurator-page-description";a.fieldname="description-"+window.com_configbox.langTag;a.entity="adminpages";a.htmlarea=1;break;case "elementtitle":a.selector="#elementwrapper-"+b.id+" .element-title, #elementwrapper-"+b.id+" .configbox-label-text";a.fieldname="title-"+window.com_configbox.langTag;a.entity="adminelements";break;case "elementdesc":a.selector="#elementwrapper-"+b.id+" .element-description";
a.fieldname="description-"+window.com_configbox.langTag;a.entity="adminelements";a.inputtype="textarea";a.htmlarea=1;break;case "xrefdesc":a.selector="#xrefwrapper-"+b.id+" .xref-description",a.fieldname="description-"+window.com_configbox.langTag,a.entity="adminoptions",a.inputtype="textarea",a.htmlarea=1,a.onEdit=function(){return cbj(".tool-tip .tool-text span").html()}}cbj(a.selector).dblclick(function(){a.tag=cbj(this);a.savename=e+"-save-"+b.id;a.cancelname=e+"-cancel-"+b.id;a.inputname=e+"-input-"+
b.id;a.containerid=e+"-container-"+b.id;var f;f="A"==this.tagName?'<a href="'+this.href+'"> '+window.com_configbox.lang.followlink+"</a>":"";var g;g="undefined"!=typeof a.inputtype&&"textarea"==a.inputtype?'<textarea class="mceEditor" id="'+a.inputname+'" name="'+a.inputname+'" style="width:100%;height:200px" rows="20" cols="40">'+a.tag.html()+"</textarea>":'<input style="margin-right:10px" id="'+a.inputname+'" type="text" name="'+a.inputname+'" value="'+a.tag.html().replace(/"/g,"&quot;")+'" />';
var c,d;"undefined"!=typeof a.inputtype&&"textarea"==a.inputtype?(c='<a class="quick-edit-textarea-button quick-edit-save" id="'+a.savename+'"><span class="fa fa-check-circle">'+com_configbox.lang.save+"</span></a>",d='<a class="quick-edit-textarea-button quick-edit-cancel" id="'+a.cancelname+'"><span class="fa fa-times-circle">'+com_configbox.lang.cancel+"</span></a>",a.tag.after('<div style="clear:both" id="'+a.containerid+'">'+c+d+f+'<div class="clear"></div>'+g+"</div>")):(c='<a class="quick-edit-textfield-button quick-edit-save" id="'+
a.savename+'"><span class="fa fa-check-circle"></span></a>',d='<a class="quick-edit-textfield-button quick-edit-cancel" id="'+a.cancelname+'"><span class="fa fa-times-circle"></span></a>',a.tag.after('<span id="'+a.containerid+'">'+g+c+d+f+"</span>"));"undefined"!=typeof a.htmlarea&&1==a.htmlarea?tinyMCE.init({convert_urls:!1,document_base_url:com_configbox.urlBase,documentBaseURL:com_configbox.urlBase,baseURL:com_configbox.tinyMceBaseUrl,suffix:".min",selector:"#"+a.inputname,theme:"modern",plugins:["advlist autolink link image lists charmap print preview hr anchor pagebreak spellchecker",
"searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking","save table contextmenu directionality emoticons template paste textcolor"],toolbar:"insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | l      ink image | print preview media fullpage | forecolor backcolor emoticons",content_css:"",template_external_list_url:"js/template_list.js",external_link_list_url:"js/link_list.js",
external_image_list_url:"js/image_list.js",media_external_list_url:"js/media_list.js"}):(cbj("#"+a.inputname).css("font-size",a.tag.css("font-size")),cbj("#"+a.inputname+":text").css("border","0px solid black"),cbj("#"+a.inputname).addClass("quickedit-input"),cbj("#"+a.inputname).css("color",a.tag.css("color")),cbj("#"+a.inputname).css("font-weight",a.tag.css("font-weight")),cbj("#"+a.inputname).css("font-family",a.tag.css("font-family")),cbj("#"+a.inputname).css("margin","0px"),cbj("#"+a.containerid).css("display",
a.tag.css("display")),cbj("#"+a.containerid).css("margin-top",a.tag.css("margin-top")),cbj("#"+a.containerid).css("margin-bottom",parseInt(a.tag.css("margin-bottom"))-1+"px"),cbj("#"+a.containerid).css("margin-left",parseInt(a.tag.css("margin-left"))-1+"px"),cbj("#"+a.containerid).css("margin-right",a.tag.css("margin-right")),cbj("#"+a.containerid).css("float",a.tag.css("float")),cbj("#"+a.inputname+":text").css("width",a.tag.width()+20),cbj("#"+a.inputname+":text").css("background","none"),cbj("#"+
a.inputname+":text").css("width","auto"));"undefined"!=typeof a.onEdit&&cbj("#"+a.inputname).val(a.onEdit(a.tag.html()));cbj("#"+a.inputname).focus().select();cbj("#"+a.cancelname).click(function(){cbj("#"+a.containerid).remove();a.tag.show()});a.tag.hide();cbj("#"+a.inputname).keydown(function(b){27==b.keyCode&&cbj("#"+a.cancelname).trigger("click");"text"==this.type&&(13==b.keyCode?cbj("#"+a.savename).trigger("click"):8==b.keyCode?cbj(this).css("width",cbj(this).width()-.5*parseFloat(cbj(this).css("font-size"))):
(37>b.keyCode||40<b.keyCode)&&16!=b.keyCode&&cbj(this).css("width",cbj(this).width()+.5*parseFloat(cbj(this).css("font-size"))))});cbj("#"+a.savename).click(function(){cbj("#"+a.cancelname).append('<span class="quickeditwait"></span>');var c={option:"com_configbox",task:"ajaxStore",format:"raw",controller:a.entity,id:b.id,lang:window.com_configbox.langSuffix};a.content="undefined"!=typeof a.htmlarea&&1==a.htmlarea?tinyMCE.get(a.inputname).getContent():cbj("#"+a.inputname).val();c[a.fieldname]=a.content;
cbj.ajax({type:"POST",url:window.com_configbox.entryFile,data:c,dataType:"json",success:function(b){if(1==b.status)"xrefdesc"!=e&&(a.tag.html(a.content),"undefined"!=typeof a.alsoputin&&cbj(a.alsoputin).html(a.content)),cbj("#"+a.containerid).remove(),a.tag.show();else{var c="";if("undefined"!=typeof b.errors)for(var d in b.errors)b.errors.hasOwnProperty(d)&&"string"==typeof b.errors[d]&&(c+=b.errors[d]);cbj("#"+a.containerid+" .quickeditwait").remove();alert(c)}}})});return!1})}};
