var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,c,b){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(c.call(b,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,b){a!=Array.prototype&&a!=Object.prototype&&(a[c]=b.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};
$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,c,b,d){if(c){b=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in b||(b[e]={});b=b[e]}a=a[a.length-1];d=b[a];c=c(d);c!=d&&null!=c&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:c})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6-impl","es3");
cbj(document).ready(function(){cbj(document).on("change","select.input-product-quantity",function(){cbj(this).closest("form").submit()});cbj(document).on("click",".button-update-quantity",function(){cbj(this).closest("form").submit()});cbj(document).on("click",".new-tab",function(a){window.open(this.href);a.preventDefault()});cbj(document).on("click",".form-submit-button",function(){cbj(this).closest("form").submit()});cbj(".cb-content .chosen-dropdown").each(function(){cbj(this).chosen()})});
var com_configbox={refreshOrderAddress:function(){cbj(".wrapper-order-address .order-address-display").load(com_configbox.addressViewUrl,function(){cbj(".wrapper-order-address .order-address-display").slideDown();cbj(".wrapper-order-address .order-address-form").slideUp()})},refreshDeliveryOptions:function(){cbj(".wrapper-delivery-options").load(com_configbox.deliveryViewUrl)},refreshPaymentOptions:function(){cbj(".wrapper-payment-options").load(com_configbox.paymentViewUrl)},refreshOrderRecord:function(){cbj(".wrapper-order-record").load(com_configbox.recordViewUrl)},
refreshPositionDetails:function(){}};
cbj(document).ready(function(){cbj("#view-userorder").length&&Kenedo.runSubviewReadyFunctions("view-adminorder");cbj("#view-user #layout-login").length&&cbj("#configbox_email").focus();cbj("#view-user #layout-register").length&&cbj("#configbox_firstname").focus();cbj(".button-cancel-info-request").click(function(){"undefined"!=typeof window.parent.cbj&&window.parent.cbj.colorbox.close()});cbj("#modalbox table td").click(function(){var a=cbj(this).text(),c=cbj(this).closest("#modalbox").data("target"),b=
cbj(this).closest("#modalbox").data("displayTarget");window.parent.cbj("#"+c).val(a);window.parent.cbj("#"+b).html(a);window.parent.cbj("#"+c).trigger("change");window.parent.cbj.colorbox.close()})});
cbj(document).ready(function(){cbj(document).on("click",".trigger-show-order-address-form",function(){cbj(".wrapper-order-address .order-address-display").slideUp();cbj(".wrapper-order-address .order-address-form").slideDown()});cbj(document).on("click",".trigger-save-order-address",function(){cbj(this).addClass("processing");var a=com_configbox.getCustomerFormData();a.option="com_configbox";a.controller="checkout";a.task="storeOrderAddress";a.format="raw";a.lang=com_configbox.langSuffix;a.comment=
cbj("#comment").val();cbj.ajax({url:com_configbox.entryFile,data:a,dataType:"json",type:"post",context:cbj(this)}).done(function(a){cbj(".trigger-save-order-address").removeClass("processing");!1===a.success?a.validationIssues.length?com_configbox.displayValidationIssues(a.validationIssues):alert(a.errors.join("\n")):(cbj(".order-address-field").removeClass("invalid").removeClass("valid"),com_configbox.refreshOrderAddress(),com_configbox.refreshDeliveryOptions(),com_configbox.refreshPaymentOptions(),
com_configbox.refreshOrderRecord(),com_configbox.refreshPositionDetails())})});cbj(document).on("change","#subview-delivery .option-control",function(){cbj(this).closest("li").addClass("processing");var a=cbj(this).val();com_configbox.setDeliveryOption(a).done(function(){com_configbox.refreshPaymentOptions();com_configbox.refreshOrderRecord();cbj("#subview-delivery li.processing").removeClass("processing")})});cbj(document).on("change","#subview-payment .option-control",function(){cbj(this).closest("li").addClass("processing");
var a=cbj(this).val();com_configbox.setPaymentOption(a).done(function(){com_configbox.refreshOrderRecord();cbj("#subview-payment li.processing").removeClass("processing")})});cbj(document).on("click",".trigger-place-order",function(){if(!cbj(this).hasClass("processing")){cbj(this).addClass("processing");var a=!1,c=!1;com_configbox.agreeToTerms&&0==cbj("#agreement-terms").prop("checked")&&(a=!0);com_configbox.agreeToRefundPolicy&&0==cbj("#agreement-refund-policy").prop("checked")&&(c=!0);var b="";
a&&c&&(b=com_configbox.lang.checkoutPleaseAgreeBoth);a&&!c&&(b=com_configbox.lang.checkoutPleaseAgreeTerms);!a&&c&&(b=com_configbox.lang.checkoutPleaseAgreeRefundPolicy);if(b)return cbj(this).removeClass("processing"),alert(b),!1;com_configbox.placeOrder().done(function(a){0==a.success?(cbj(".trigger-place-order").removeClass("processing"),alert(a.errors.join("\n"))):cbj(".wrapper-psp-bridge").load(com_configbox.pspBridgeViewUrl,function(){cbj(".trigger-redirect-to-psp").trigger("click")})})}});cbj(document).on("click",
".trigger-redirect-to-psp",function(){"undefined"!=typeof cbj(this).attr("href")&&(window.location=cbj(this).attr("href"));cbj(this).closest("form").length&&cbj(this).closest("form").submit()})});cbj(document).ready(function(){});
cbj(document).ready(function(){cbj("body").on("change","#view-customerform .trigger-toggle-same-delivery",function(){if(1==cbj(this).prop("checked"))cbj(this).closest(".customer-form-sections").removeClass("show-delivery-fields");else{if("undefined"==cbj(this).data("got-toggled")){cbj(this).data("got-toggled",!0);var a=cbj(this).closest("#view-customerform").data("customer-fields"),c=cbj(this).closest("#view-customerform").find("#form_type").val(),b;for(b in a)if(a.hasOwnProperty(b)){var d=a[b];if("1"==
d["show_"+c]&&cbj("#"+d.field_name).length&&cbj("#billing"+d.field_name).length){var e=cbj("#billing"+d.field_name).val();cbj("input[name="+d.field_name+"]").val(e)}}}cbj(this).closest(".customer-form-sections").addClass("show-delivery-fields")}});cbj("body").on("change",".recurring-customer-login #show-login",function(){var a=cbj(this).closest(".recurring-customer-login").find(".login-wrapper").show();1==cbj(this).prop("checked")?a.show():a.hide()});cbj("body").on("click",".recurring-customer-login .trigger-login",
function(){if(!cbj(this).hasClass("processing")){cbj(this).addClass("processing");var a=cbj(this).closest(".recurring-customer-login");a.find(".feedback").text("");var c=a.find(".input-username").val(),b=a.find(".input-password").val();com_configbox.requestLogin(c,b).done(function(b){!1===b.success?0!==a.find(".login-box .feedback").length?a.find(".login-box .feedback").text(b.errorMessage):alert(b.errorMessage):(b=cbj("#view-customerform").data("view-url"),cbj("#view-customerform").load(b))}).always(function(){a.find(".login-box .processing").removeClass("processing")})}});
cbj("body").on("click",".recurring-customer-login .trigger-recover-password",function(){var a=cbj(this).closest(".login-wrapper").find(".input-username").val();a&&cbj(this).closest(".recurring-customer-login").find(".recover-box .input-username").val(a);cbj(this).closest(".recurring-customer-login").find(".login-box").hide();cbj(this).closest(".recurring-customer-login").find(".recover-box").show();cbj(this).closest(".recurring-customer-login").find(".change-password-box").hide()});cbj("body").on("click",
".recurring-customer-login .trigger-cancel-recovery",function(){cbj(this).closest(".recurring-customer-login").find(".login-box").show();cbj(this).closest(".recurring-customer-login").find(".recover-box").hide();cbj(this).closest(".recurring-customer-login").find(".change-password-box").hide()});cbj("body").on("click",".recurring-customer-login .trigger-request-verification-code",function(){if(!cbj(this).hasClass("processing")){cbj(this).addClass("processing");var a=cbj(this).closest(".recover-box").find(".input-username").val(),
c=cbj(this).closest(".recurring-customer-login");c.find(".feedback").text("");com_configbox.requestPasswordChangeVerificationCode(a).done(function(a){!1===a.success?0!==c.find(".recover-box .feedback").length?c.find(".recover-box .feedback").text(a.errorMessage):alert(a.errorMessage):(c.find(".recover-box").hide(),c.find(".change-password-box").show())}).always(function(){c.find(".recover-box .processing").removeClass("processing")})}});cbj("body").on("click",".recurring-customer-login .trigger-change-password",
function(){if(!cbj(this).hasClass("processing")){cbj(this).addClass("processing");var a=cbj(this).closest(".change-password-box").find(".input-verification").val(),c=cbj(this).closest(".change-password-box").find(".input-new-password").val(),b=cbj(this).closest(".recurring-customer-login");b.find(".feedback").text("");com_configbox.requestPasswordChange(a,c,!0).done(function(a){!1===a.success?cbj.each(a.errors,function(a,c){b.find(".change-password-box .feedback").append("<div>"+c.message+"</div>")}):
(a=cbj("#view-customerform").data("view-url"),cbj("#view-customerform").load(a))}).always(function(){b.find(".processing").removeClass("processing")})}});cbj("body").on("keyup",".recurring-customer-login",function(a){if(13==a.which){var c=cbj(this).closest(".recurring-customer-login");a=cbj(a.target);0!==a.closest(".login-box").length&&c.find(".trigger-login").trigger("click");0!==a.closest(".recover-box").length&&c.find(".trigger-request-verification-code").trigger("click");0!==a.closest(".change-password-box").length&&
c.find(".trigger-change-password").trigger("click")}})});
com_configbox.getCustomerFormData=function(){var a={};cbj("#view-customerform :input").each(function(c,b){!cbj(b).attr("name")||cbj(b).is("input[type=radio]")&&0==cbj(b).prop("checked")||cbj(b).is("input[type=checkbox]")&&0==cbj(b).prop("checked")||(cbj(b).is("input[type=checkbox]")&&1==cbj(b).prop("checked")&&(a[cbj(b).attr("name")]="0"),a[cbj(b).attr("name")]=cbj(b).val())});a.samedelivery&&cbj.each(a,function(c,b){if(0==c.indexOf("billing")){var d=c.substr(7);"undefined"!=typeof a[d]&&(a[d]=b)}});
return a};com_configbox.displayValidationIssues=function(a){cbj("#view-customerform .customer-field:visible").removeClass("invalid").addClass("valid");for(var c in a)a.hasOwnProperty(c)&&(cbj(".customer-field-"+a[c].fieldName).removeClass("valid").addClass("invalid"),cbj(".customer-field-"+a[c].fieldName).find(".validation-tooltip").data("message",a[c].message));com_configbox.initValidationTooltips()};
com_configbox.removeValidationIssues=function(){cbj("#view-customerform .customer-field:visible").removeClass("invalid").removeClass("valid");cbj("#view-customerform .validation-tooltip").data("message","");com_configbox.initValidationTooltips()};com_configbox.initValidationTooltips=function(){cbj(document).tooltip({items:".validation-tooltip",content:function(){return cbj(this).data("message")},position:{my:"center bottom-20",at:"center top",using:function(a,c){cbj(this).css(a);cbj("<div>").addClass("arrow").addClass(c.vertical).addClass(c.horizontal).appendTo(this)}}})};
cbj(document).ready(function(){Kenedo.setFormTaskHandler("admincustomer",function(a,c){"cancel"==c&&(window.location.href=Kenedo.base64UrlDecode(cbj("#return").val()));cbj(this).addClass("processing");var b=com_configbox.getCustomerFormData();b.option="com_configbox";b.controller="user";b.task="store";b.format="raw";b.lang=com_configbox.langSuffix;cbj.ajax({url:com_configbox.entryFile,data:b,dataType:"json",type:"post",context:cbj(this),success:function(a){cbj(".trigger-store-customer-form").removeClass("processing");
!1===a.success?a.validationIssues.length?com_configbox.displayValidationIssues(a.validationIssues):alert(a.errors.join("\n")):(cbj(".customer-field").removeClass("invalid").removeClass("valid"),"apply"==c&&(Kenedo.clearMessages(),Kenedo.addMessage(a.message,"notice"),Kenedo.showMessages()),"store"==c&&(window.location.href=Kenedo.base64UrlDecode(cbj("#return").val())))}})})});
