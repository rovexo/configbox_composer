var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,d,e){a instanceof String&&(a=String(a));for(var f=a.length,c=0;c<f;c++){var b=a[c];if(d.call(e,b,c,a))return{i:c,v:b}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,d,e){a!=Array.prototype&&a!=Object.prototype&&(a[d]=e.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,d,e,f){if(d){e=$jscomp.global;a=a.split(".");for(f=0;f<a.length-1;f++){var c=a[f];c in e||(e[c]={});e=e[c]}a=a[a.length-1];f=e[a];d=d(f);d!=f&&null!=d&&$jscomp.defineProperty(e,a,{configurable:!0,writable:!0,value:d})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,e){return $jscomp.findInternal(this,a,e).v}},"es6","es3");
define("cbj kenedo configbox/server cbj.ui configbox/ruleEditor configbox/calcEditor".split(" "),function(a,d,e){return{initBackend:function(){a("body").on("click",".view-item-picker .sub-list-trigger",function(){a(this).is(".trigger-opened")?(a(this).removeClass("trigger-opened"),a(this).closest("li").children(".sub-list").removeClass("list-opened")):(a(this).addClass("trigger-opened"),a(this).closest("li").children(".sub-list").addClass("list-opened"))});a(document).on("click",".trigger-toggle-offcanvas",
function(){a(".row-offcanvas").toggleClass("active");a(this).toggleClass("fa-bars").toggleClass("fa-window-close")});a(".toggle-wrapper").on("click",".toggle-handle",function(){a(this).closest(".toggle-wrapper").find(".toggle-content").toggle();a(this).toggleClass("opened")});var f=a(".left-part").outerHeight();a(".news").outerHeight(f);a(".configbox-mainmenu").css("min-height",parseInt(f)-27);a(document).on("click",".trigger-store-license-key",function(){a(this).closest("form").submit()});d.registerSubviewReadyFunction("view-adminelement",
function(){0!==a("#view-adminelement .not-using-shapediver").length&&a(".property-group-shapediver_start").addClass("hidden")});d.registerSubviewReadyFunction("view-adminoptionassignment",function(){0!==a("#view-adminoptionassignment .not-using-shapediver").length&&a(".property-group-shapediver_start").addClass("hidden")});d.registerSubviewReadyFunction("view-adminmainmenu",function(){a(document).on("click","#view-adminmainmenu .trigger-toggle-sub-items",function(){a(this).toggleClass("opened");a(this).closest(".menu-list-item").children(".sub-items").toggleClass("opened")})});
d.registerSubviewReadyFunction("view-admincalculation",function(){a(document).on("click","#view-admincalculation .task-copy",function(c){c.stopPropagation();a("#id").val("");a("#task").val("apply");a(".task-apply").click()});a("#view-admincalculation #property-name-product_id select").change(function(){a(this).val()&&(a("#view-admincalculation #property-name-type").show(),a("#view-admincalculation #property-name-type input:checked").change())});a("#view-admincalculation #property-name-type input").change(function(){var c=
a(this).val();c=a(".calc-type-subview").data("url-"+c);var b=a("#view-admincalculation #property-name-product_id #product_id").val();c="magento"===e.config.platformName?c+("productId/"+b):c+(-1===c.indexOf("?")?"?productId="+b:"&productId="+b);d.loadSubview(c,".calc-type-subview",null,!1)})});d.registerSubviewReadyFunction("view-admincalccode",function(){a("#view-admincalccode select option").each(function(){if(0!=a(this).attr("value")){var c=a(this).text()+" (ID: "+a(this).attr("value")+")";a(this).text(c)}});
cbrequire(["cbj.chosen"],function(){a("#view-admincalccode select").chosen()})});d.registerSubviewReadyFunction("view-adminorders",function(){0!==a(".in-frontend").length&&a(".listing-link").click(function(c){c.stopPropagation();window.location.href=a(this).attr("href")});a("#view-adminorders .kenedo-limit-select").attr("name","limit");a("#view-adminorders .kenedo-limit-select").change(function(){a(this).closest("form").submit()});a("#view-adminorders .kenedo-pagination-list a").click(function(){var c=
a(this).attr("class").replace("page-start-","");a("#start").val(c);a(this).closest("form").submit()});a("#view-adminorders .kenedo-filter-list select").change(function(){a(this).closest("form").submit()});a("#view-adminorders .kenedo-task-list li.task").click(function(){var c=a(this).attr("class").replace("task-","").replace("task","").replace(" ","");a("#task").val(c);a(this).closest("form").submit()})});d.registerSubviewReadyFunction("view-adminusers",function(){a("#view-adminusers .kenedo-listing-form .order-property").on("click",
function(){var c=a(this).attr("id").replace("order-property-",""),b="asc";a(this).hasClass("active")&&(b=a(this).hasClass("direction-asc")?"desc":"asc");a("#order_field").val(c);a("#order_dir").val(b);a(this).closest("form").submit()});a("#view-adminusers .kenedo-limit-select").attr("name","limit");a("#view-adminusers .kenedo-limit-select").change(function(){a(this).closest("form").submit()});a("#view-adminusers .kenedo-pagination-list a").click(function(){var c=a(this).attr("class").replace("page-start-",
"");a("#start").val(c);a(this).closest("form").submit()});a("#view-adminusers .kenedo-filter-list select").change(function(){a(this).closest("form").submit()})});d.registerSubviewReadyFunction("view-adminuser",function(){a(".kenedo-details-form").addClass("no-validation")});d.registerSubviewReadyFunction("view-admintemplate",function(){cbrequire(["configbox/server"],function(a){d.addStylesheet(a.config.urlSystemAssets+"/kenedo/external/codemirror-5.30.0/lib/codemirror.css?version="+a.config.cacheVar)});
cbrequire(["codemirror","codemirror/mode/htmlmixed/htmlmixed","codemirror/mode/php/php","codemirror/mode/javascript/javascript"],function(c){c.fromTextArea(document.getElementById("template-code"),{lineNumbers:!0,matchBrackets:!0,mode:"php",indentUnit:4,indentWithTabs:!0,viewportMargin:Infinity}).on("change",function(b){a("#template-code").val(b.getValue())})})});d.registerSubviewReadyFunction("view-adminoptionassignment",function(){a(document).on("change","#view-adminoptionassignment #option_id",
function(){var c=a(this).val(),b=a("#option_assignment_load_url").val().replace("%",c);cbrequire(["tinyMCE"],function(a){3<a.majorVersion&&a.remove()});a(".option-data .option-fields-target").animate({opacity:".0"},200,function(){a(".option-data .option-fields-target").load(b+" .kenedo-properties",function(){d.initNewContent(a(".option-data .option-fields-target"));d.afterInitNewContent(a(".option-data .option-fields-target"));a(".option-data .option-fields-target").animate({opacity:"1"},400)})})})});
d.registerSubviewReadyFunction("view-adminuserfields",function(){a(".browser-validation input, .server-validation input").each(function(){a(this).data("invalidEntry",!1)});a(".server-validation input").focus(function(){a(this).data("invalidEntry",null)});a(".server-validation input").change(function(){var c=a(this).val(),b=a(this);c||(b.css("border","1px solid #ccc"),b.data("invalidEntry",!1));if(c){b.parent().find(".loading-symbol").show();var k=e.config.urlXhr,h={option:"com_configbox"};h.expression=
c;h.controller="ajaxapi";h.view="ajaxapi";h.task="validateRegex";h.format="raw";h.tmpl="component";h.lang=e.config.languageCode;c={};c.data=h;c.async=!0;c.success=function(c){c=a.trim(c);"OK"!==c?(b.css("border","1px solid red"),window.alert(c),b.data("invalidEntry",!0)):(b.css("border","1px solid #ccc"),b.data("invalidEntry",!1));b.parent().find(".loading-symbol").hide()};a.ajax(k,c)}});a(".browser-validation input").change(function(){var c=a(this).val(),b=a(this);b.data("invalidEntry",null);b.css("border",
"1px solid #ccc");try{(new RegExp(c)).exec("dummytext")}catch(k){b.css("border","1px solid red"),window.alert(k.message),b.data("invalidEntry",!0)}});a.each("salutation_id country email language billingsalutation_id billingcountry billingemail billinglanguage".split(" "),function(c,b){a(".userfield-"+b+" .browser-validation input, .userfield-"+b+" .server-validation input").prop("disabled",!0)});a.each("salutation_id firstname lastname country email billingsalutation_id billingfirstname billinglastname billingcountry billingemail".split(" "),
function(c,b){a(".userfield-"+b+" .show-checkout input").click(function(b){a(this).prop("checked")||(b.stopPropagation(),b.preventDefault(),window.alert("This field is needed by the system and cannot be hidden"))})});a.each("salutation_id firstname lastname country email billingsalutation_id billingfirstname billinglastname billingcountry billingemail".split(" "),function(c,b){a(".userfield-"+b+" .require-checkout input").click(function(b){a(this).prop("checked")||(b.stopPropagation(),b.preventDefault(),
window.alert("This field is needed by the system and cannot be made optional"))})});a.each(["billingsalutation_id","billingfirstname","billinglastname","billingcountry","billingemail"],function(c,b){a(".userfield-"+b+" .show-quotation input").click(function(b){a(this).prop("checked")||(b.stopPropagation(),b.preventDefault(),window.alert("This field is needed by the system and cannot be hidden"))})});a.each(["billingsalutation_id","billingfirstname","billinglastname","billingcountry","billingemail"],
function(c,b){a(".userfield-"+b+" .require-quotation input").click(function(b){a(this).prop("checked")||(b.stopPropagation(),b.preventDefault(),window.alert("This field is needed by the system and cannot be made optional"))})})});d.registerSubviewReadyFunction("view-adminproduct",function(){a(document).on("click",".trigger-load-model-data",function(){var c=a(this);if(!c.hasClass("processing")){c.addClass("processing");c.css("width",c.css("width"));c.data("ready-text",c.text());c.text(c.data("processing-text"));
var b=a(this).closest(".property-type-shapedivermodel"),k=b.find(".model-url"),h=b.find(".model-parameters"),d=b.find(".model-textured-geometries"),e=b.find(".shapediver-iframe"),g=k.val();cbrequire(["configbox/shapediver"],function(b){if("http"!==g.substr(0,4)){var f=/<iframe.*?src="(.*?)"/,l=f.exec(g);l&&"undefined"!==typeof l[1]?g=f.exec(g)[1]:(f=/<iframe.*?src='(.*?)'/,(l=f.exec(g))&&"undefined"!==typeof l[1]&&(g=f.exec(g)[1]))}f=g.indexOf("?");-1!==f&&(g=g.substr(0,f));k.val(g).change();b.addMessageListener();
var m={doneJobs:[],requiredJobs:["getParameters","getTextures"],registerDoneJob:function(a){this.doneJobs.push(a);a=!1;for(var b in this.requiredJobs)this.requiredJobs.hasOwnProperty(b)&&-1===this.doneJobs.indexOf(this.requiredJobs[b])&&(a=!0);!1===a&&this.doneCallback()},doneCallback:function(){c.text(c.data("done-text"));c.addClass("btn-success");window.setTimeout(function(){c.text(c.data("ready-text"));c.removeClass("btn-success");c.removeClass("processing")},1E3)}};e.on("load",function(){b.sendMessage({command:"getParameterDefinitions",
arguments:[]},"shapediver-iframe",function(a){var b=[];0!==a.errorCode?window.alert("Cannot get parameter definitions from model. Error code is "+a.errorCode+" Error message is "+a.errorMessage+". Assuming that there are no parameters in model."):b=a.result;for(var c in b)!0===b.hasOwnProperty(c)&&"undefined"===typeof b[c].type&&"undefined"!==typeof b[c].choices&&(b[c].type="choices");h.val(JSON.stringify(b)).change();m.registerDoneJob("getParameters")});a(document).on("sdGeometryUpdateDone",function(){b.sendMessage({command:"findTexturedGeometry",
arguments:[]},"shapediver-iframe",function(a){var b=[];0!==a.errorCode?window.alert("Cannot get texturedGeometries from model. Error code is "+a.errorCode+" Error message is "+a.errorMessage+". Assuming that there are no textures in model."):b=a.result;d.val(JSON.stringify(b)).change();m.registerDoneJob("getTextures")})})});g+="?version="+e.data("api-version");g!==e.attr("src")&&e.attr("src","about:blank");e.attr("src",g)})}});a(document).on("change",".model-parameters, .model-textured-geometries, .model-url, .model-ratio",
function(){var c=a(this).closest(".property-type-shapedivermodel"),b=c.find(".model-url"),k=c.find(".model-parameters"),d=c.find(".model-textured-geometries"),e=c.find(".model-ratio");c=c.find(".shapediver-model-data");b={iframeUrl:b.val(),ratioDimensions:e.val(),parameterData:JSON.parse(k.val()),texturedGeometries:JSON.parse(d.val())};c.val(JSON.stringify(b))});a(document).on("keyup",".model-ratio",function(){a(this).trigger("change")})});a(document).on("click",".trigger-delete-rule",function(){a(this).closest(".kenedo-property").find(".data-field").val("").trigger("change");
a(this).closest(".kenedo-property").find(".rule-wrapper").removeClass("has-rule").addClass("has-no-rule")});a(document).on("click",".trigger-edit-rule",function(){var c=a(this).closest(".kenedo-property").find(".data-field"),b=a(this).closest(".kenedo-property").find(".modal");cbrequire(["cbj.bootstrap"],function(){var d=c.data("editor-url"),h={returnFieldId:c.data("return-field-id"),usageIn:c.data("usage-in"),productId:c.data("product-id"),pageId:c.data("page-id"),rule:c.val()};b.find(".modal-content").html("");
b.one("show.bs.modal",function(){b.find(".modal-content").load(d,h,function(){a(document).trigger("cbViewInjected")})});b.modal()})});(function(){a(document).on("click",".property-type-groupPrice .trigger-show-group-picker",function(){var b=a(this).closest(".property-type-groupPrice");b.find(".group-picker").show();b.find(".trigger-show-group-picker").hide();b.find(".trigger-cancel-group-picker").show()});a(document).on("click",".property-type-groupPrice .trigger-cancel-group-picker",function(){var b=
a(this).closest(".property-type-groupPrice");b.find(".group-picker").hide();b.find(".trigger-show-group-picker").show();b.find(".trigger-cancel-group-picker").hide()});var c=function(b){var c=[];b.find(".price-overrides .price-override").each(function(){c.push({group_id:a(this).data("group-id"),price:a(this).find(".chosen-price").val()})});b.find(".overrides-json-data").val(window.JSON.stringify(c));var d=c.length,e=b.find(".trigger-add-price-override").length;d>=e?b.find(".trigger-show-group-picker").addClass("hidden"):
b.find(".trigger-show-group-picker").removeClass("hidden")};a(document).on("keyup change",".property-type-groupPrice .chosen-price",function(){var b=a(this).closest(".property-type-groupPrice");c(b)});a(document).on("click",".property-type-groupPrice .trigger-add-price-override",function(){var b=a(this).closest(".property-type-groupPrice"),d=a(this).data("group-id"),e=a(b).find(".price-override-blueprint .price-override").clone();e.attr("data-group-id",d);e.find(".group-title-field").text(a(this).text());
b.find(".price-overrides").append(e);a(this).addClass("used-already");b.find(".trigger-cancel-group-picker").trigger("click");c(b)});a(document).on("click",".property-type-groupPrice .trigger-remove-price-override",function(){var b=a(this).closest(".property-type-groupPrice"),d=a(this).closest(".price-override").data("group-id");a(this).closest(".price-override").remove();b.find(".group-picker .group-id-"+d).removeClass("used-already");c(b)})})();(function(){a(document).on("click",".property-type-calculationOverride .trigger-show-group-picker",
function(){var b=a(this).closest(".property-type-calculationOverride");b.find(".group-picker").show();b.find(".trigger-show-group-picker").hide();b.find(".trigger-cancel-group-picker").show()});a(document).on("click",".property-type-calculationOverride .trigger-cancel-group-picker",function(){var b=a(this).closest(".property-type-calculationOverride");b.find(".group-picker").hide();b.find(".trigger-show-group-picker").show();b.find(".trigger-cancel-group-picker").hide()});var c=function(b){var c=
[];b.find(".price-overrides .price-override").each(function(){c.push({group_id:parseInt(a(this).data("group-id")),calculation_id:parseInt(a(this).find(".chosen-calculation").val())})});b.find(".overrides-json-data").val(window.JSON.stringify(c));var d=c.length,e=b.find(".trigger-add-price-override").length;d>=e?b.find(".trigger-show-group-picker").addClass("hidden"):b.find(".trigger-show-group-picker").removeClass("hidden")};a(document).on("change",".property-type-calculationOverride .chosen-calculation",
function(){var b=a(this).closest(".property-type-calculationOverride");c(b);b=a(this).val();a(this).closest(".price-override").find(".join-link-"+b).show().siblings().hide()});a(document).on("click",".property-type-calculationOverride .trigger-add-price-override",function(){var b=a(this).closest(".property-type-calculationOverride"),d=a(this).data("group-id"),e=a(b).find(".price-override-blueprint .price-override").clone();e.attr("data-group-id",d);e.find(".group-title-field").text(a(this).text());
d="dummy-id-for-chosen-"+Math.floor(1E4*Math.random());e.find("select").attr("id",d).attr("name",d);var f=e.find(".join-link-0 a").attr("href");f&&(f=f.replace("PLACEHOLDER_CALC_SELECT",d),e.find(".join-link-0 a").attr("href",f));b.find(".price-overrides").append(e);a("#"+d).chosen({disable_search_threshold:10,search_contains:!0,inherit_select_classes:!0,width:"100%"});a(this).addClass("used-already");b.find(".trigger-cancel-group-picker").trigger("click");c(b)});a(document).on("click",".property-type-calculationOverride .trigger-remove-price-override",
function(){var b=a(this).closest(".property-type-calculationOverride"),d=a(this).closest(".price-override").data("group-id");a(this).closest(".price-override").remove();b.find(".group-picker .group-id-"+d).removeClass("used-already");c(b)})})();d.initAdminPage()}}});
