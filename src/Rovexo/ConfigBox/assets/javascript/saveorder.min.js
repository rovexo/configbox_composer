define(["cbj","configbox/customerform","configbox/server"],function(e,d,f){var b={initSaveOrderPage:function(){e(document).on("click",".view-saveorder .trigger-save-order",b.onSaveOrder)},onSaveOrder:function(){var c=e(this);if(!c.hasClass("processing")){c.addClass("processing");var b=d.getCustomerFormData();b.cartId=c.closest(".view-saveorder").data("cart-id");f.makeRequest("saveorder","saveOrder",b).always(function(){c.removeClass("processing")}).done(function(a){!1===a.success?"undefined"!=typeof a.validationIssues&&
a.validationIssues.length?d.displayValidationIssues(a.validationIssues):window.alert(a.errors.join("\n")):(d.removeValidationIssues(),a.redirectUrl&&(window.location.href=a.redirectUrl))})}}};return b});
