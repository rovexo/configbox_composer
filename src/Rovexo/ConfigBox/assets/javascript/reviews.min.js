var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};
$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6-impl","es3");
define(["cbj"],function(a){return{initReviewsPage:function(){a(document).on("click",".trigger-close-modal",function(){a(this).closest(".modal").modal("hide")});a(document).on("click",".trigger-toggle-all-reviews",function(){var b=a(this);b.data("text-less")==b.text()?b.text(b.data("text-more")):(b.data("text-more",b.text()),b.text(b.data("text-less")));a(this).closest(".view-reviews").find(".review-list").toggleClass("show-all")});a(document).on("click",".trigger-show-review-form",function(){a(this).closest(".view-reviews").find(".wrapper-review-form").show();
a(this).hide()})},initReviewForm:function(){a(document).on("click",".trigger-close-modal",function(){a(this).closest(".modal").modal("hide")});a(document).on("click",".trigger-cancel-review",function(){0!=a(this).closest(".view-reviewform").parent(".modal-content").length&&a(this).closest(".modal").modal("hide");a(this).closest(".view-reviews").find(".trigger-show-review-form").show();a(this).closest(".wrapper-review-form").hide()});a(document).on("click",".trigger-send-review",function(){console.log("he");
var b=a(this).closest(".view-reviewform"),c=a(this);if(!c.hasClass("processing")){var d={name:b.find("#review-name").val(),comment:b.find("#review-comment").val(),rating:b.find(".rating-stars").data("rating"),productId:b.find("#review-product-id").val()},e=!0;""==d.name&&(b.find("#review-name").addClass("invalid"),e=!1);""==d.comment&&(b.find("#review-comment").addClass("invalid"),e=!1);""==d.rating&&(b.find(".wrapper-rating-stars").addClass("invalid"),e=!1);!1!==e&&(b.find(".invalid").removeClass("invalid"),
c.addClass("processing"),b.find(".feedback-message").text(""),cbrequire(["configbox/server"],function(a){a.makeRequest("reviews","storeReview",d).done(function(a){b.find(".feedback-message").text(a.feedback);b.find(".review-form").slideUp()}).always(function(){c.removeClass("processing")})}))}});a(document).on("mouseenter click",".review-form .rating-star",function(){var b=a(this).closest(".rating-stars"),c=a(this);b.find(".rating-star").removeClass("full-star half-star").addClass("empty-star");c.addClass("full-star").prevAll(".rating-star").addClass("full-star");
b.data("rating",c.index()+1)})}}});
